const experiences = [
  {
    img: './assets/image/experiences/estrategia-liderazgo.avif',
    title: 'Estrategia y liderazgo técnico',
    description: 'Roadmaps, priorización y acompañamiento end-to-end.'
  },
  {
    img: './assets/image/experiences/desarrollo-software.jpg',
    title: 'Desarrollo de software Fullstack',
    description: 'Frontend y backend con buenas prácticas y entregas iterativas.'
  },
  {
    img: './assets/image/experiences/web-site.jpg',
    title: 'Páginas web',
    description: 'Sitios y landings claros para marcas, productos y campañas.'
  },
  {
    img: './assets/image/experiences/integracion-de-apisnew.jpg',
    title: 'Integraciones con APIs',
    description: 'Conexión con servicios externos y flujos de datos confiables.'
  },
  {
    img: './assets/image/experiences/software-como-servicio-saas.webp',
    title: 'Servicios SaaS',
    description: 'Plataformas escalables, multi-tenant y listas para crecer.'
  },
  {
    img: './assets/image/experiences/soporte-remoto.png',
    title: 'Soporte y operación',
    description: 'Monitoreo, QA, releases frecuentes y soporte a usuarios.'
  },
  {
    img: './assets/image/experiences/ia.jpg',
    title: 'Automatización con IA',
    description: 'Automatizar procesos con modelos y herramientas de IA.'
  },
  {
    img: './assets/image/experiences/chatbot.jpg',
    title: 'Chatbots y asistentes',
    description: 'Bots conversacionales para atención y soporte 24/7.'
  }
]

const projects = [
  {
    title: 'StudioXperto',
    description: 'Consultora digital: estrategia, producto y tecnología end-to-end.',
    link: 'studioxperto.html',
    img: './assets/image/studioxperto.jpg',
    stack: ['Consultoría', 'Producto', 'TI']
  },
  {
    title: 'Apps móviles',
    description: 'Aplicaciones móviles que he construido y lanzado con equipos ágiles.',
    link: 'apps-moviles.html',
    img: './assets/image/projects/app.png',
    stack: ['iOS/Android', 'UI/UX', 'APIs']
  },
  {
    title: 'Páginas web',
    description: 'Sitios y landings para marcas, productos y campañas.',
    link: 'paginas-web.html',
    img: 'https://images.unsplash.com/photo-1498050108023-c5249f4df085?auto=format&fit=crop&w=800&q=80',
    stack: ['Landing', 'SEO', 'Branding']
  },
  {
    title: 'Plataformas web',
    description: 'Plataformas SaaS y microservicios con integraciones a datos.',
    link: 'plataformas-web.html',
    img: 'https://images.unsplash.com/photo-1517245386807-bb43f82c33c4?auto=format&fit=crop&w=800&q=80',
    stack: ['SaaS', 'APIs', 'Escalabilidad']
  },
]

const certificates = [
  {
    img: 'https://www.europeanvalley.es/noticias/wp-content/uploads/2019/07/Python.jpeg',
    title: 'Programación en Python',
    fecha: '11 de junio del 2021',
    description: 'Python',
    link: 'https://drive.google.com/file/d/1_HD3nDVkaH8AYIGzTYyQ7TuofLGD863t/view?usp=sharing'
  },
  {
    img: 'https://storage.googleapis.com/icemdweb-wp-uploads/2017/11/34954f15-marketing-digital-empresas.jpg',
    title: 'Marketing Digital',
    fecha: '26 de abril del 2020',
    description: 'Marketing Digital',
    link: 'https://drive.google.com/file/d/1pBgzKpF8Ouim67Cxlg6rwbndIxSQxN_I/view?usp=sharing'
  },
  {
    img: 'https://corporacioninformatica.com/wp-content/uploads/2015/01/curso-online-de-programacion-web.jpg',
    title: 'Programación Web',
    fecha: '20 de mayo del 2019',
    description: 'Fundamentos y buenas prácticas de desarrollo web.',
    link: 'https://drive.google.com/file/d/1PtP0L0ej2ok5Tdq8RKsTlrbisrD6gffs/view?usp=sharing'
  },
  {
    img: 'https://images.unsplash.com/photo-1545239351-1141bd82e8a6?auto=format&fit=crop&w=900&q=80',
    title: 'Curso de Capacitación y Actualización',
    fecha: '21 de agosto del 2018',
    description: 'Programación en PHP, modelamiento de bases de datos, análisis y diseño de sistemas.',
    link: 'https://drive.google.com/file/d/1baq4iGQ6Ytb3Lb1QCbwHSEvtd76hyYRl/view?usp=sharing'
  },
  {
    img: 'http://imagenes.universia.net/gc/net/images/educacion/c/cu/cur/curso-online-gratuito-mejorar-habilidades-conversacion-ingles.jpg',
    title: 'Inglés',
    fecha: '01 de agosto del 2018',
    description: 'The basic English course level.',
    link: 'https://drive.google.com/file/d/1IXhJHQDuPH4R3u4dIWEXW8bcZV0IedUe/view?usp=sharing'
  },
  {
    img: 'http://i.eldiario.com.ec/fotos-manabi-ecuador/2019/04/20190402085423_la-tecnologa-a-herramienta-clave-pa.jpg',
    title: 'In Full Dat Tec.',
    fecha: '24 de octubre del 2017',
    description: 'Acceso al conocimiento, delitos informáticos, negocios en redes sociales y bitcoins.',
    link: 'https://drive.google.com/file/d/1DKVkQxqCj8HpBECpEApLycbi9e-_a5mj/view?usp=sharing'
  },
  {
    img: 'https://i2.wp.com/www.universidadescr.com/blog/wp-content/uploads/cisco.jpg?fit=860%2C365&ssl=1',
    title: 'Cisco - Internet del Todo',
    fecha: '21 de octubre del 2017',
    description: 'Beneficios y desafíos del Internet, modelos y prototipos en IdT.',
    link: 'https://drive.google.com/file/d/1QO-NVrqZgYYOu1gqPaR1kdlK607Metji/view?usp=sharing'
  },
  {
    img: 'http://www.panoramaaudiovisual.com/wp-content/uploads/2015/10/SQL-Server.jpg',
    title: 'SQL Server 2008',
    fecha: '30 de noviembre del 2016',
    description: 'Normalización de bases de datos, consultas, agrupación y resúmenes de datos.',
    link: 'https://drive.google.com/file/d/14zy_zYwMn4BRDSb6LcZff6vYFsDZdKtD/view?usp=sharing'
  },
  {
    img: 'https://soyofimatica.com/wp-content/uploads/2018/10/descargar-excel.jpg',
    title: 'Excel Avanzado',
    fecha: '25 de septiembre del 2016',
    description: 'Fórmulas, funciones, tablas dinámicas, herramientas de datos, formularios y VBA.',
    link: 'https://drive.google.com/file/d/1iFx-wakSiXCa0zPHj7g7-hrfg3sCkbEw/view?usp=sharing'
  }
]

function renderCards(list, containerId, templateFn) {
  const container = document.getElementById(containerId)
  if (!container) return
  container.innerHTML = list.map(templateFn).join('')
}

const experienceTemplate = (item) => `
  <div class="col-12 col-md-6 col-lg-4 mb-4">
    <div class="card card--soft h-100">
      <img class="card-img-top" height="180" src="${item.img}" alt="${item.title}">
      <div class="card-body">
        <span class="badge badge-pill badge-light text-primary">${item.title}</span>
        <p class="card-text mt-2">${item.description}</p>
      </div>
    </div>
  </div>
`

const projectTemplate = (project) => `
  <div class="col-12 col-md-6 col-lg-3 mb-4">
    <div class="card card--project h-100">
      <img class="card-img-top" src="${project.img}" alt="${project.title}" height="180">
      <div class="card-body d-flex flex-column">
        <h5>${project.title}</h5>
        <p class="card-text flex-grow-1">${project.description}</p>
        <div class="stack">
          ${project.stack.map(tag => `<span class="stack__item">${tag}</span>`).join('')}
        </div>
        <a class="card-link mt-2" href="${project.link}" target="_blank" rel="noopener">Visitar proyecto</a>
      </div>
    </div>
  </div>
`

const certificateTemplate = (item) => `
  <div class="col-12 col-md-4 mb-4">
    <div class="card card--soft h-100">
      <img class="card-img-top" src="${item.img}" alt="${item.title}" height="180">
      <div class="card-body">
        <span class="badge badge-pill badge-light text-primary">${item.fecha}</span>
        <h5 class="mt-2">${item.title}</h5>
        <p class="card-text">${item.description}</p>
        <a class="card-link" href="${item.link}" target="_blank" rel="noopener">Ver certificado</a>
      </div>
    </div>
  </div>
`

document.addEventListener('DOMContentLoaded', () => {
  renderCards(experiences, 'experience-grid', experienceTemplate)
  renderCards(projects, 'projects-grid', projectTemplate)
  renderCards(certificates.slice(0, 3), 'certificates-grid', certificateTemplate)

  const navLinks = document.querySelectorAll('a.nav-link[href^="#"]')
  navLinks.forEach(link => {
    link.addEventListener('click', (e) => {
      e.preventDefault()
      const targetId = link.getAttribute('href').slice(1)
      const el = document.getElementById(targetId)
      if (el) {
        const offset = document.querySelector('.navbar')?.offsetHeight || 64
        const top = el.getBoundingClientRect().top + window.scrollY - offset + 8
        window.scrollTo({ top, behavior: 'smooth' })
      }
    })
  })

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible')
      }
    })
  }, { threshold: 0.2 })

  document.querySelectorAll('.reveal').forEach(section => observer.observe(section))
})
